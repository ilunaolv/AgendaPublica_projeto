@{
    ViewData["Title"] = "Notificações";
}

<style>
    /* ESTILOS ESPECÍFICOS DA PÁGINA DE NOTIFICAÇÕES COMPLETA */
    .page-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }

    .notifications-list {
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        overflow: hidden;
        margin-top: 20px;
    }

    .notification-card {
        padding: 15px;
        border-bottom: 1px solid #eee;
        display: flex;
        gap: 12px;
        align-items: flex-start;
    }

        .notification-card:last-child {
            border-bottom: none;
        }

        .notification-card.unread {
            background-color: #f0f8ff;
            border-left: 3px solid #0077c8;
        }

    .notification-icon-large {
        font-size: 24px;
        flex-shrink: 0;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        background-color: #e9ecef;
        margin-top: 5px;
    }

    .notification-content {
        flex-grow: 1;
    }

    .notification-title {
        font-weight: bold;
        margin-bottom: 5px;
        color: #333;
    }

    .notification-desc {
        color: #666;
        margin-bottom: 5px;
        line-height: 1.4;
    }

    .notification-time {
        font-size: 0.8rem;
        color: #999;
        margin-bottom: 8px;
    }

    .notification-actions {
        display: flex;
        gap: 10px;
        margin-top: 10px;
    }

    .btn-sm {
        padding: 0.25rem 0.5rem;
        font-size: 0.875rem;
    }

    .filter-bar {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }

    .filter-btn {
        background: white;
        border: 1px solid #dee2e6;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.2s;
    }

        .filter-btn.active {
            background: #0077c8;
            color: white;
            border-color: #0077c8;
        }

        .filter-btn:hover:not(.active) {
            background: #f8f9fa;
        }

    .notification-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid #0077c8;
    }

    .notification-count {
        background: #0077c8;
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.9rem;
    }
</style>


<main class="col-md-10 mx-auto col-lg-10 px-md-4 form-section">

    <div class="d-flex justify-content-between align-items-center mb-4 p-3 border-bottom bg-light">
        <h1 class="h3 mb-0 text-dark">Notificações</h1>
        <button type="button" class="btn btn-outline-primary" onclick="window.history.back()">
            <i class="bi bi-arrow-left me-2"></i>Voltar
        </button>
    </div>


    <div class="filter-bar">
        <button class="filter-btn active" data-filter="all">Todas</button>
        <button class="filter-btn" data-filter="unread">Não lidas</button>
        <button class="filter-btn" data-filter="events">Eventos</button>
        <button class="filter-btn" data-filter="system">Sistema</button>
    </div>

    <div class="d-flex align-items-center justify-content-between mb-3">
        <div>
            <span class="notification-count" id="unreadCount">3 não lidas</span>
        </div>
        <button class="btn btn-outline-primary btn-sm" id="markAllRead">
            <i class="bi bi-check-all me-1"></i> Marcar todas como lidas
        </button>
    </div>

    <div class="notifications-list">
        <!-- Notificação 1 - EVENTO CONFIRMADO -->
        <div class="notification-card unread" data-category="events">
            <div class="notification-icon-large">
                <i class="bi bi-check-circle-fill text-success"></i>
            </div>
            <div class="notification-content">
                <div class="notification-title">Confirmação do Prefeito</div>
                <div class="notification-desc">O Prefeito confirmou presença no evento <strong>"Apresentação SEPLAN"</strong> agendado para 15 de outubro às 14:00 no Auditório Principal.</div>
                <div class="notification-time">Há 2 horas</div>
                <div class="notification-actions">
                    <button class="btn btn-primary btn-sm">Ver detalhes do evento</button>
                    <button class="btn btn-outline-secondary btn-sm mark-read">Marcar como lida</button>
                </div>
            </div>
        </div>

        <!-- Notificação 2 - EVENTO CONFIRMADO -->
        <div class="notification-card unread" data-category="events">
            <div class="notification-icon-large">
                <i class="bi bi-check-circle-fill text-success"></i>
            </div>
            <div class="notification-content">
                <div class="notification-title">Confirmação do Prefeito</div>
                <div class="notification-desc">O Prefeito confirmou presença no evento <strong>"Reunião Sefin"</strong> agendado para 18 de outubro às 10:00 na Sala de Reuniões 1.</div>
                <div class="notification-time">Há 4 horas</div>
                <div class="notification-actions">
                    <button class="btn btn-primary btn-sm">Ver detalhes do evento</button>
                    <button class="btn btn-outline-secondary btn-sm mark-read">Marcar como lida</button>
                </div>
            </div>
        </div>

        <!-- Notificação 3 - NOVO EVENTO -->
        <div class="notification-card" data-category="events">
            <div class="notification-icon-large">
                <i class="bi bi-info-circle-fill text-primary"></i>
            </div>
            <div class="notification-content">
                <div class="notification-title">Novo evento agendado</div>
                <div class="notification-desc">Foi agendada uma <strong>visita técnica ao Porto de Santos</strong> para o dia 22 de outubro às 09:00. Confira os detalhes.</div>
                <div class="notification-time">Ontem</div>
                <div class="notification-actions">
                    <button class="btn btn-primary btn-sm">Ver detalhes do evento</button>
                    <button class="btn btn-outline-secondary btn-sm mark-read">Marcar como lida</button>
                </div>
            </div>
        </div>

        <!-- Notificação 4 - ATUALIZAÇÃO DO SISTEMA -->
        <div class="notification-card" data-category="system">
            <div class="notification-icon-large">
                <i class="bi bi-exclamation-triangle-fill text-warning"></i>
            </div>
            <div class="notification-content">
                <div class="notification-title">Atualização do sistema</div>
                <div class="notification-desc">Uma nova atualização do sistema será aplicada no sábado, 19 de outubro, das 02:00 às 04:00. O sistema ficará indisponível durante este período.</div>
                <div class="notification-time">2 dias atrás</div>
                <div class="notification-actions">
                    <button class="btn btn-primary btn-sm">Ver detalhes</button>
                    <button class="btn btn-outline-secondary btn-sm mark-read">Marcar como lida</button>
                </div>
            </div>
        </div>

        <!-- Notificação 5 - LEMBRETE DE EVENTO -->
        <div class="notification-card" data-category="events">
            <div class="notification-icon-large">
                <i class="bi bi-calendar-event text-info"></i>
            </div>
            <div class="notification-content">
                <div class="notification-title">Lembrete de evento</div>
                <div class="notification-desc"><strong>Reunião com a equipe de comunicação</strong> amanhã às 15:00 na sala de reuniões 3. Não se esqueça!</div>
                <div class="notification-time">3 dias atrás</div>
                <div class="notification-actions">
                    <button class="btn btn-primary btn-sm">Ver detalhes do evento</button>
                    <button class="btn btn-outline-secondary btn-sm mark-read">Marcar como lida</button>
                </div>
            </div>
        </div>

        <!-- Notificação 6 - EVENTO CANCELADO -->
        <div class="notification-card" data-category="events">
            <div class="notification-icon-large">
                <i class="bi bi-x-circle-fill text-danger"></i>
            </div>
            <div class="notification-content">
                <div class="notification-title">Evento cancelado</div>
                <div class="notification-desc">O evento <strong>"Workshop de Inovação"</strong> previsto para 25 de outubro foi cancelado. Mais informações em breve.</div>
                <div class="notification-time">5 dias atrás</div>
                <div class="notification-actions">
                    <button class="btn btn-primary btn-sm">Ver detalhes</button>
                    <button class="btn btn-outline-secondary btn-sm mark-read">Marcar como lida</button>
                </div>
            </div>
        </div>
    </div>
</main>

@section Scripts {
    <script>
        // SCRIPT ESPECÍFICO DA PÁGINA DE NOTIFICAÇÕES
        document.addEventListener('DOMContentLoaded', function() {
            // Filtros
            const filterButtons = document.querySelectorAll('.filter-btn');
            const notificationCards = document.querySelectorAll('.notification-card');

            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class de todos os botões
                    filterButtons.forEach(btn => btn.classList.remove('active'));

                    // Adiciona active class ao botão clicado
                    this.classList.add('active');

                    const filter = this.getAttribute('data-filter');

                    // Filtra as notificações
                    notificationCards.forEach(card => {
                        if (filter === 'all') {
                            card.style.display = 'flex';
                        } else if (filter === 'unread') {
                            if (card.classList.contains('unread')) {
                                card.style.display = 'flex';
                            } else {
                                card.style.display = 'none';
                            }
                        } else {
                            if (card.getAttribute('data-category') === filter) {
                                card.style.display = 'flex';
                            } else {
                                card.style.display = 'none';
                            }
                        }
                    });
                });
            });

            // Marcar como lida
            const markReadButtons = document.querySelectorAll('.mark-read');
            markReadButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const card = this.closest('.notification-card');
                    card.classList.remove('unread');
                    this.textContent = 'Lida';
                    this.disabled = true;

                    // Atualizar contador de não lidas
                    updateUnreadCount();
                });
            });

            // Marcar todas como lidas
            const markAllReadButton = document.getElementById('markAllRead');
            if (markAllReadButton) {
                markAllReadButton.addEventListener('click', function() {
                    document.querySelectorAll('.notification-card.unread').forEach(card => {
                        card.classList.remove('unread');
                        const button = card.querySelector('.mark-read');
                        if (button) {
                            button.textContent = 'Lida';
                            button.disabled = true;
                        }
                    });

                    // Atualizar contador de não lidas
                    updateUnreadCount();
                });
            }

            // Função para atualizar contador de não lidas
            function updateUnreadCount() {
                const unreadCount = document.querySelectorAll('.notification-card.unread').length;
                const countElement = document.getElementById('unreadCount');
                if (countElement) {
                    if (unreadCount === 0) {
                        countElement.textContent = 'Todas lidas';
                        countElement.style.background = '#28a745';
                    } else {
                        countElement.textContent = `${unreadCount} não lida${unreadCount > 1 ? 's' : ''}`;
                        countElement.style.background = '#0077c8';
                    }
                }
            }

            // Inicializar contador
            updateUnreadCount();
        });
    </script>
}